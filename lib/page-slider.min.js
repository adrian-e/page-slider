define(["jquery"],function(t){"use strict";return function(i){this.transitionsEnabled=!0,this.transitionDurationMs=300;var n,s=[];i.addClass("page-slider-container");var a=function(t,i){var n="0px";switch(i){case"left":n="-100%";break;case"right":n="100%"}var s="translate3d("+n+", 0px , 0px)";t.css({webkitTransform:s,transform:s})},r=function(i){if(i instanceof t)return i;var n=t();return i.forEach(function(t){n=n.add(t)}),n},e=function(t){t=r(t),t.css({webkitTransitionDuration:this.transitionDurationMs+"ms",transitionDuration:this.transitionDurationMs+"ms"})},o=function(t){t=r(t),t.css({webkitTransform:"none",transform:"none",webkitTransitionDuration:"0s",transitionDuration:"0s"})};this.disableTransitions=function(){this.transitionsEnabled=!1},this.enableTransitions=function(){this.transitionsEnabled=!0},this.getNextSlideBehaviour=function(){var t=s.length;return 0===t?"first":location.hash===s[t-2]?"back":"forward"},this.slidePage=function(t,i){var n=location.hash,a=this.getNextSlideBehaviour();switch(a){case"first":s.push(n),this.slidePageFrom(t,null,i);break;case"back":s.pop(),this.slidePageFrom(t,"left",i);break;case"forward":s.push(n),this.slidePageFrom(t,"right",i)}},this.slidePageFrom=function(s,r,f){f.beforeTransition=f.beforeTransition||t.noop,f.afterTransition=f.afterTransition||t.noop;var u=n,c=!u;if(s.addClass("page"),i.append(s),f.beforeTransition(),c||!r||!this.transitionsEnabled)return o(s),u&&u.remove(),n=s,void f.afterTransition(c);a(s,r);var h=setTimeout(function(){l()},this.transitionDurationMs+100);n.one("transitionend webkitTransitionEnd",function(){l()}),e.call(this,[s,u]),i[0].offsetWidth,setTimeout(function(){a(s,"center"),a(u,"left"===r?"right":"left"),n=s},0);var l=function(){o(n),i.find("> .page:not(:last)").remove(),clearTimeout(h),f.afterTransition(!1)}}}});