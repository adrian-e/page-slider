!function(t,i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof exports?module.exports=i(require("jquery")):t.PageSlider=i(t.jQuery)}(this,function(t){"use strict";var i=function(t){this.$container=t,t.css({height:"100%",width:"100%",overflow:"hidden"})};return i.prototype={constructor:i,$container:null,transitionsEnabled:!0,transitionDurationMs:300,stateHistory:[],$currentPage:null,_setPagePosition:function(t,i){var n="0px";switch(i){case"left":n="-100%";break;case"right":n="100%"}var e="translate3d("+n+", 0px , 0px)";t.css({webkitTransform:e,transform:e})},_jQueryArrayToCollection:function(i){if(i instanceof t)return i;var n=t();return i.forEach(function(t){n=n.add(t)}),n},_enableTransitionOnPages:function(t){t=this._jQueryArrayToCollection(t),t.css({webkitTransitionDuration:this.transitionDurationMs+"ms",transitionDuration:this.transitionDurationMs+"ms"})},_disableTransitionOnPages:function(t){t=this._jQueryArrayToCollection(t),t.css({webkitTransform:"none",transform:"none",webkitTransitionDuration:"0s",transitionDuration:"0s"})},setTransitionDurationMs:function(t){this.transitionDurationMs=t},disableTransitions:function(){this.transitionsEnabled=!1},enableTransitions:function(){this.transitionsEnabled=!0},getSlideOriginForLocation:function(t){var i=this.stateHistory.length;return 0===i?null:t===this.stateHistory[i-2]?"left":"right"},getNextSlideOrigin:function(){return this.getSlideOriginForLocation(location.hash)},slidePage:function(t,i){var n=location.hash,e=this.getNextSlideOrigin();switch(e){case"left":this.stateHistory.pop(),this.slidePageFrom(t,"left",i);break;case"right":this.stateHistory.push(n),this.slidePageFrom(t,"right",i);break;default:this.stateHistory.push(n),this.slidePageFrom(t,null,i)}},slidePageFrom:function(i,n,e){var s=this;e=e||{},e.beforeTransition=e.beforeTransition||t.noop,e.afterTransition=e.afterTransition||t.noop;var r=this.$currentPage,o=!r;if(i.addClass("page"),this.$container.append(i),e.beforeTransition(),o||!n||!this.transitionsEnabled)return this._disableTransitionOnPages(i),r&&r.remove(),this.$currentPage=i,void e.afterTransition(o);this._setPagePosition(i,n);var a=setTimeout(function(){u()},this.transitionDurationMs+100);this.$currentPage.one("transitionend webkitTransitionEnd",function(){u()}),this._enableTransitionOnPages([i,r]),this.$container[0].offsetWidth,this._setPagePosition(i,"center"),this._setPagePosition(r,"left"===n?"right":"left"),this.$currentPage=i;var u=function(){s._disableTransitionOnPages(s.$currentPage),s.$container.find("> .page:not(:last)").remove(),clearTimeout(a),e.afterTransition(!1)}}},i});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhZ2Utc2xpZGVyLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJQYWdlU2xpZGVyIiwialF1ZXJ5IiwidGhpcyIsIiQiLCIkY29udGFpbmVyIiwiY3NzIiwiaGVpZ2h0Iiwid2lkdGgiLCJvdmVyZmxvdyIsInByb3RvdHlwZSIsImNvbnN0cnVjdG9yIiwidHJhbnNpdGlvbnNFbmFibGVkIiwidHJhbnNpdGlvbkR1cmF0aW9uTXMiLCJzdGF0ZUhpc3RvcnkiLCIkY3VycmVudFBhZ2UiLCJfc2V0UGFnZVBvc2l0aW9uIiwiJHBhZ2UiLCJuZXdMb2NhdGlvbiIsIm5ld1Bvc2l0aW9uIiwidHJhbnNmb3JtIiwid2Via2l0VHJhbnNmb3JtIiwiX2pRdWVyeUFycmF5VG9Db2xsZWN0aW9uIiwianF1ZXJ5QXJyYXkiLCIkY29sbGVjdGlvbiIsImZvckVhY2giLCIkZWwiLCJhZGQiLCJfZW5hYmxlVHJhbnNpdGlvbk9uUGFnZXMiLCIkcGFnZXMiLCJ3ZWJraXRUcmFuc2l0aW9uRHVyYXRpb24iLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJfZGlzYWJsZVRyYW5zaXRpb25PblBhZ2VzIiwic2V0VHJhbnNpdGlvbkR1cmF0aW9uTXMiLCJkdXJhdGlvbk1zIiwiZGlzYWJsZVRyYW5zaXRpb25zIiwiZW5hYmxlVHJhbnNpdGlvbnMiLCJnZXRTbGlkZU9yaWdpbkZvckxvY2F0aW9uIiwiaGFzaCIsImhpc3RvcnlMZW5ndGgiLCJsZW5ndGgiLCJnZXROZXh0U2xpZGVPcmlnaW4iLCJsb2NhdGlvbiIsInNsaWRlUGFnZSIsIiRuZXdQYWdlIiwib3B0aW9ucyIsInN0YXRlIiwic2xpZGVCZWhhdmlvdXIiLCJwb3AiLCJzbGlkZVBhZ2VGcm9tIiwicHVzaCIsIm9yaWdpbiIsInRoYXQiLCJiZWZvcmVUcmFuc2l0aW9uIiwibm9vcCIsImFmdGVyVHJhbnNpdGlvbiIsIiRvbGRQYWdlIiwiaXNGaXJzdFBhZ2VTbGlkZSIsImFkZENsYXNzIiwiYXBwZW5kIiwicmVtb3ZlIiwic2hpbVRyYW5zaXRpb25FbmQiLCJzZXRUaW1lb3V0Iiwib25UcmFuc2l0aW9uRW5kIiwib25lIiwib2Zmc2V0V2lkdGgiLCJmaW5kIiwiY2xlYXJUaW1lb3V0Il0sIm1hcHBpbmdzIjoiQ0FPRSxTQUFVQSxFQUFNQyxHQUNTLGtCQUFYQyxTQUF5QkEsT0FBT0MsSUFFdkNELFFBQVEsVUFBV0QsR0FDTyxnQkFBWkcsU0FFZEMsT0FBT0QsUUFBVUgsRUFBUUssUUFBUSxXQUdqQ04sRUFBS08sV0FBYU4sRUFBUUQsRUFBS1EsU0FFckNDLEtBQU0sU0FBVUMsR0FDZixZQUVBLElBQUlILEdBQWEsU0FBVUksR0FFdkJGLEtBQUtFLFdBQWFBLEVBR2xCQSxFQUFXQyxLQUNQQyxPQUFRLE9BQ1JDLE1BQU8sT0FDUEMsU0FBVSxXQTZPbEIsT0F6T0FSLEdBQVdTLFdBRVBDLFlBQWFWLEVBRWJJLFdBQVksS0FDWk8sb0JBQW9CLEVBQ3BCQyxxQkFBc0IsSUFDdEJDLGdCQUNBQyxhQUFjLEtBT2RDLGlCQUFrQixTQUFVQyxFQUFPQyxHQUUvQixHQUFJQyxHQUFjLEtBRWxCLFFBQVFELEdBQ0osSUFBSyxPQUNEQyxFQUFjLE9BQ2QsTUFDSixLQUFLLFFBQ0RBLEVBQWMsT0FJdEIsR0FBSUMsR0FBWSxlQUFpQkQsRUFBYyxjQUUvQ0YsR0FBTVgsS0FDRmUsZ0JBQW1CRCxFQUNuQkEsVUFBYUEsS0FJckJFLHlCQUEwQixTQUFVQyxHQUVoQyxHQUFJQSxZQUF1Qm5CLEdBQ3ZCLE1BQU9tQixFQUdYLElBQUlDLEdBQWNwQixHQU1sQixPQUpBbUIsR0FBWUUsUUFBUSxTQUFVQyxHQUMxQkYsRUFBY0EsRUFBWUcsSUFBSUQsS0FHM0JGLEdBTVhJLHlCQUEwQixTQUFVQyxHQUVoQ0EsRUFBUzFCLEtBQUttQix5QkFBeUJPLEdBRXZDQSxFQUFPdkIsS0FDSHdCLHlCQUE0QjNCLEtBQUtVLHFCQUF1QixLQUN4RGtCLG1CQUFzQjVCLEtBQUtVLHFCQUF1QixRQU8xRG1CLDBCQUEyQixTQUFVSCxHQUVqQ0EsRUFBUzFCLEtBQUttQix5QkFBeUJPLEdBRXZDQSxFQUFPdkIsS0FDSGUsZ0JBQW1CLE9BQ25CRCxVQUFhLE9BQ2JVLHlCQUE0QixLQUM1QkMsbUJBQXNCLFFBTzlCRSx3QkFBeUIsU0FBVUMsR0FDL0IvQixLQUFLVSxxQkFBdUJxQixHQU1oQ0MsbUJBQW9CLFdBQ2hCaEMsS0FBS1Msb0JBQXFCLEdBTTlCd0Isa0JBQW1CLFdBQ2ZqQyxLQUFLUyxvQkFBcUIsR0FHOUJ5QiwwQkFBMkIsU0FBVUMsR0FDakMsR0FBSUMsR0FBZ0JwQyxLQUFLVyxhQUFhMEIsTUFFdEMsT0FBc0IsS0FBbEJELEVBQ08sS0FFRkQsSUFBU25DLEtBQUtXLGFBQWF5QixFQUFnQixHQUN6QyxPQUdBLFNBT2ZFLG1CQUFvQixXQUNoQixNQUFPdEMsTUFBS2tDLDBCQUEwQkssU0FBU0osT0FRbkRLLFVBQVcsU0FBVUMsRUFBVUMsR0FFM0IsR0FBSUMsR0FBUUosU0FBU0osS0FFakJTLEVBQWlCNUMsS0FBS3NDLG9CQUUxQixRQUFRTSxHQUNKLElBQUssT0FDRDVDLEtBQUtXLGFBQWFrQyxNQUNsQjdDLEtBQUs4QyxjQUFjTCxFQUFVLE9BQVFDLEVBQ3JDLE1BQ0osS0FBSyxRQUNEMUMsS0FBS1csYUFBYW9DLEtBQUtKLEdBQ3ZCM0MsS0FBSzhDLGNBQWNMLEVBQVUsUUFBU0MsRUFDdEMsTUFDSixTQUNJMUMsS0FBS1csYUFBYW9DLEtBQUtKLEdBQ3ZCM0MsS0FBSzhDLGNBQWNMLEVBQVUsS0FBTUMsS0FrQi9DSSxjQUFlLFNBQVVMLEVBQVVPLEVBQVFOLEdBRXZDLEdBQUlPLEdBQU9qRCxJQUVYMEMsR0FBVUEsTUFDVkEsRUFBUVEsaUJBQW1CUixFQUFRUSxrQkFBb0JqRCxFQUFFa0QsS0FDekRULEVBQVFVLGdCQUFrQlYsRUFBUVUsaUJBQW1CbkQsRUFBRWtELElBRXZELElBQUlFLEdBQVdyRCxLQUFLWSxhQUNoQjBDLEdBQW9CRCxDQVF4QixJQU5BWixFQUFTYyxTQUFTLFFBQ2xCdkQsS0FBS0UsV0FBV3NELE9BQU9mLEdBRXZCQyxFQUFRUSxtQkFHSkksSUFBcUJOLElBQVdoRCxLQUFLUyxtQkFjckMsTUFYQVQsTUFBSzZCLDBCQUEwQlksR0FHM0JZLEdBQ0FBLEVBQVNJLFNBR2J6RCxLQUFLWSxhQUFlNkIsTUFHcEJDLEdBQVFVLGdCQUFnQkUsRUFLNUJ0RCxNQUFLYSxpQkFBaUI0QixFQUFVTyxFQUdoQyxJQUFJVSxHQUFvQkMsV0FBVyxXQUMvQkMsS0FDRDVELEtBQUtVLHFCQUF1QixJQUUvQlYsTUFBS1ksYUFBYWlELElBQUksb0NBQXFDLFdBQ3ZERCxNQU1KNUQsS0FBS3lCLDBCQUEwQmdCLEVBQVVZLElBS3pDckQsS0FBS0UsV0FBVyxHQUFHNEQsWUFFbkI5RCxLQUFLYSxpQkFBaUI0QixFQUFVLFVBQ2hDekMsS0FBS2EsaUJBQWlCd0MsRUFBdUIsU0FBWEwsRUFBb0IsUUFBVSxRQUNoRWhELEtBQUtZLGFBQWU2QixDQUVwQixJQUFJbUIsR0FBa0IsV0FDbEJYLEVBQUtwQiwwQkFBMEJvQixFQUFLckMsY0FFcENxQyxFQUFLL0MsV0FBVzZELEtBQUssc0JBQXNCTixTQUUzQ08sYUFBYU4sR0FDYmhCLEVBQVFVLGlCQUFnQixNQU03QnREIiwiZmlsZSI6InBhZ2Utc2xpZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBIZWxwZXIgdG8gc2xpZGUgYSBuZXcgcGFnZSBpbiB0aGUgYXBwLlxuICogVGhpcyBoZWxwZXIgb25seSB3b3JrcyB3ZWxsIGlmIHRoZSBjb250YWluZXIgaXMgYXQgMTAwJSBoZWlnaHQvd2lkdGggYW5kIG92ZXJmbG93IGhpZGRlbi5cbiAqXG4gKiBCYXNlZCBvbiA6IGh0dHBzOi8vZ2l0aHViLmNvbS9jY29lbnJhZXRzL2RpcmVjdG9yeS1iYWNrYm9uZS10b3Bjb2F0LXJlcXVpcmVcbiAqXG4gKi9cbiAoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xuICAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgLy8gTm9kZS5cbiAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk7XG4gICAgIH0gZWxzZSB7XG4gICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuICAgICAgICAgcm9vdC5QYWdlU2xpZGVyID0gZmFjdG9yeShyb290LmpRdWVyeSk7XG4gICAgIH1cbiB9KHRoaXMsIGZ1bmN0aW9uICgkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIFBhZ2VTbGlkZXIgPSBmdW5jdGlvbiAoJGNvbnRhaW5lcikge1xuXG4gICAgICAgIHRoaXMuJGNvbnRhaW5lciA9ICRjb250YWluZXI7XG5cbiAgICAgICAgLy8gVGhlIGNvbnRhaW5lciBuZWVkIHNwZWNpZmljIHN0eWxlXG4gICAgICAgICRjb250YWluZXIuY3NzKHtcbiAgICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIFBhZ2VTbGlkZXIucHJvdG90eXBlID0ge1xuXG4gICAgICAgIGNvbnN0cnVjdG9yOiBQYWdlU2xpZGVyLFxuXG4gICAgICAgICRjb250YWluZXI6IG51bGwsXG4gICAgICAgIHRyYW5zaXRpb25zRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uTXM6IDMwMCxcbiAgICAgICAgc3RhdGVIaXN0b3J5OiBbXSxcbiAgICAgICAgJGN1cnJlbnRQYWdlOiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgYSBwYWdlIHBvc2l0aW9uIHZpYSB0cmFuc2xhdGUzZFxuICAgICAgICAgKiBAcGFyYW0ge2pxdWVyeX0gJHBhZ2UgUGFnZSB0aGF0IHdlIHdhbnQgdG8gUG9zaXRpb25cbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5ld0xvY2F0aW9uIE5ldyBwb3NpdGlvbiAoJ2xlZnQnLCAncmlnaHQnIG9yIG51bGwgKGRlZmF1bHQpKVxuICAgICAgICAgKi9cbiAgICAgICAgX3NldFBhZ2VQb3NpdGlvbjogZnVuY3Rpb24gKCRwYWdlLCBuZXdMb2NhdGlvbikge1xuXG4gICAgICAgICAgICB2YXIgbmV3UG9zaXRpb24gPSAnMHB4JztcblxuICAgICAgICAgICAgc3dpdGNoIChuZXdMb2NhdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgICAgICAgICBuZXdQb3NpdGlvbiA9ICctMTAwJSc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgbmV3UG9zaXRpb24gPSAnMTAwJSc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKCcgKyBuZXdQb3NpdGlvbiArICcsIDBweCAsIDBweCknO1xuXG4gICAgICAgICAgICAkcGFnZS5jc3Moe1xuICAgICAgICAgICAgICAgICd3ZWJraXRUcmFuc2Zvcm0nOiB0cmFuc2Zvcm0sXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6IHRyYW5zZm9ybSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIF9qUXVlcnlBcnJheVRvQ29sbGVjdGlvbjogZnVuY3Rpb24gKGpxdWVyeUFycmF5KSB7XG5cbiAgICAgICAgICAgIGlmIChqcXVlcnlBcnJheSBpbnN0YW5jZW9mICQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ganF1ZXJ5QXJyYXk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciAkY29sbGVjdGlvbiA9ICQoKTtcblxuICAgICAgICAgICAganF1ZXJ5QXJyYXkuZm9yRWFjaChmdW5jdGlvbiAoJGVsKSB7XG4gICAgICAgICAgICAgICAgJGNvbGxlY3Rpb24gPSAkY29sbGVjdGlvbi5hZGQoJGVsKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gJGNvbGxlY3Rpb247XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuYWJsZSBjc3MgdHJhbnNpdGlvbiBvbiB0aGUgZ2l2ZW4gcGFnZS5cbiAgICAgICAgICovXG4gICAgICAgIF9lbmFibGVUcmFuc2l0aW9uT25QYWdlczogZnVuY3Rpb24gKCRwYWdlcykge1xuXG4gICAgICAgICAgICAkcGFnZXMgPSB0aGlzLl9qUXVlcnlBcnJheVRvQ29sbGVjdGlvbigkcGFnZXMpO1xuXG4gICAgICAgICAgICAkcGFnZXMuY3NzKHtcbiAgICAgICAgICAgICAgICAnd2Via2l0VHJhbnNpdGlvbkR1cmF0aW9uJzogdGhpcy50cmFuc2l0aW9uRHVyYXRpb25NcyArICdtcycsXG4gICAgICAgICAgICAgICAgJ3RyYW5zaXRpb25EdXJhdGlvbic6IHRoaXMudHJhbnNpdGlvbkR1cmF0aW9uTXMgKyAnbXMnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc2FibGUgY3NzIHRyYW5zaXRpb24gb24gdGhlIGdpdmVuIHBhZ2UuXG4gICAgICAgICAqL1xuICAgICAgICBfZGlzYWJsZVRyYW5zaXRpb25PblBhZ2VzOiBmdW5jdGlvbiAoJHBhZ2VzKSB7XG5cbiAgICAgICAgICAgICRwYWdlcyA9IHRoaXMuX2pRdWVyeUFycmF5VG9Db2xsZWN0aW9uKCRwYWdlcyk7XG5cbiAgICAgICAgICAgICRwYWdlcy5jc3Moe1xuICAgICAgICAgICAgICAgICd3ZWJraXRUcmFuc2Zvcm0nOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICdub25lJyxcbiAgICAgICAgICAgICAgICAnd2Via2l0VHJhbnNpdGlvbkR1cmF0aW9uJzogJzBzJyxcbiAgICAgICAgICAgICAgICAndHJhbnNpdGlvbkR1cmF0aW9uJzogJzBzJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdHJhbnNpdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICovXG4gICAgICAgIHNldFRyYW5zaXRpb25EdXJhdGlvbk1zOiBmdW5jdGlvbiAoZHVyYXRpb25Ncykge1xuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uRHVyYXRpb25NcyA9IGR1cmF0aW9uTXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc2FibGUgY3NzIHRyYW5zaXRpb24gb24gcGFnZVxuICAgICAgICAgKi9cbiAgICAgICAgZGlzYWJsZVRyYW5zaXRpb25zOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25zRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmFibGUgY3NzIHRyYW5zaXRpb24gb24gcGFnZVxuICAgICAgICAgKi9cbiAgICAgICAgZW5hYmxlVHJhbnNpdGlvbnM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbnNFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRTbGlkZU9yaWdpbkZvckxvY2F0aW9uOiBmdW5jdGlvbiAoaGFzaCkge1xuICAgICAgICAgICAgdmFyIGhpc3RvcnlMZW5ndGggPSB0aGlzLnN0YXRlSGlzdG9yeS5sZW5ndGg7XG5cbiAgICAgICAgICAgIGlmIChoaXN0b3J5TGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoYXNoID09PSB0aGlzLnN0YXRlSGlzdG9yeVtoaXN0b3J5TGVuZ3RoIC0gMl0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2xlZnQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdyaWdodCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybiB0aGUgdHlwZSBvZiBzbGlkZSAobnVsbCwgJ2xlZnQnIG9yICdyaWdodCcpXG4gICAgICAgICAqL1xuICAgICAgICBnZXROZXh0U2xpZGVPcmlnaW46IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNsaWRlT3JpZ2luRm9yTG9jYXRpb24obG9jYXRpb24uaGFzaCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZSB0aGlzIGZ1bmN0aW9uIGlmIHlvdSB3YW50IFBhZ2VTbGlkZXIgdG8gYXV0b21hdGljYWxseSBkZXRlcm1pbmVcbiAgICAgICAgICogdGhlIHNsaWRpbmcgZGlyZWN0aW9uIGJhc2VkIG9uIHRoZSBzdGF0ZSBoaXN0b3J5LlxuICAgICAgICAgKiBhZnRlclRyYW5zaXRpb24gZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW4gdGhlIHRyYW5zaXRpb24gZW5kc1xuICAgICAgICAgKi9cbiAgICAgICAgc2xpZGVQYWdlOiBmdW5jdGlvbiAoJG5ld1BhZ2UsIG9wdGlvbnMpIHtcblxuICAgICAgICAgICAgdmFyIHN0YXRlID0gbG9jYXRpb24uaGFzaDtcblxuICAgICAgICAgICAgdmFyIHNsaWRlQmVoYXZpb3VyID0gdGhpcy5nZXROZXh0U2xpZGVPcmlnaW4oKTtcblxuICAgICAgICAgICAgc3dpdGNoIChzbGlkZUJlaGF2aW91cikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlSGlzdG9yeS5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZVBhZ2VGcm9tKCRuZXdQYWdlLCAnbGVmdCcsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVIaXN0b3J5LnB1c2goc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlUGFnZUZyb20oJG5ld1BhZ2UsICdyaWdodCcsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlSGlzdG9yeS5wdXNoKHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZVBhZ2VGcm9tKCRuZXdQYWdlLCBudWxsLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZSB0aGlzIGZ1bmN0aW9uIGRpcmVjdGx5IGlmIHlvdSB3YW50IHRvIGNvbnRyb2wgdGhlIHNsaWRpbmcgZGlyZWN0aW9uIG91dHNpZGUgUGFnZVNsaWRlclxuICAgICAgICAgKiBAcGFyYW0gIHskfSAkbmV3UGFnZSBUaGUgbmV3IHBhZ2UgdG8gc2xpZGUgaW5cbiAgICAgICAgICogQHBhcmFtICB7U3RyaW5nfSBvcmlnaW4gT3JpZ2luIG9mIHRoZSBzbGlkZSAoJ2xlZnQnLCAncmlnaHQnLCBvciBudWxsKVxuICAgICAgICAgKiBAcGFyYW0gIHtmdW5jdGlvbn0gb3B0aW9uc1xuICAgICAgICAgKiAgYmVmb3JlVHJhbnNpdGlvbjogQ2FsbGVkIGJlZm9yZSB0aGUgdHJhbnNpdGlvbiwgYWZ0ZXIgdGhlIHBhZ2UgaXMgYWRkZWRcbiAgICAgICAgICogICAgICAgICAgICAgICAgICAgIHRvIHRoZSBET00uXG4gICAgICAgICAqICAgYWZ0ZXJUcmFuc2l0aW9uOiBDYWxsZWQgd2hlbiB0aGUgc2xpZGUgZW5kXG4gICAgICAgICAqICAgICAgICAgICAgICAgICAgICBvciBpbW1lZGlhdGVseSBpZiB0aGVyZSBpcyBubyB0cmFuc2l0aW9uLlxuICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgQSBib29sZWFuIGlzIHBhc3NlZCB0byB0aGUgY2FsbGJhY2sgOiB0cnVlIGlmIHdlIGp1c3Qgc2xpZGVcbiAgICAgICAgICogICAgICAgICAgICAgICAgICAgIGluIHRoZSB2ZXJ5IGZpcnN0IHBhZ2UuXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICBzbGlkZVBhZ2VGcm9tOiBmdW5jdGlvbiAoJG5ld1BhZ2UsIG9yaWdpbiwgb3B0aW9ucykge1xuXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICAgICAgb3B0aW9ucy5iZWZvcmVUcmFuc2l0aW9uID0gb3B0aW9ucy5iZWZvcmVUcmFuc2l0aW9uIHx8ICQubm9vcDtcbiAgICAgICAgICAgIG9wdGlvbnMuYWZ0ZXJUcmFuc2l0aW9uID0gb3B0aW9ucy5hZnRlclRyYW5zaXRpb24gfHwgJC5ub29wO1xuXG4gICAgICAgICAgICB2YXIgJG9sZFBhZ2UgPSB0aGlzLiRjdXJyZW50UGFnZTtcbiAgICAgICAgICAgIHZhciBpc0ZpcnN0UGFnZVNsaWRlID0gISRvbGRQYWdlO1xuXG4gICAgICAgICAgICAkbmV3UGFnZS5hZGRDbGFzcygncGFnZScpO1xuICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyLmFwcGVuZCgkbmV3UGFnZSk7XG5cbiAgICAgICAgICAgIG9wdGlvbnMuYmVmb3JlVHJhbnNpdGlvbigpO1xuXG4gICAgICAgICAgICAvLyBGaXJzdCBsb2FkZWQgcGFnZSAobm8gb2xkIHBhZ2UpIG9yIG5vIHRyYW5zaXRpb25cbiAgICAgICAgICAgIGlmIChpc0ZpcnN0UGFnZVNsaWRlIHx8ICFvcmlnaW4gfHwgIXRoaXMudHJhbnNpdGlvbnNFbmFibGVkKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICB0aGlzLl9kaXNhYmxlVHJhbnNpdGlvbk9uUGFnZXMoJG5ld1BhZ2UpO1xuXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIG9sZCBwYWdlIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgICAgIGlmICgkb2xkUGFnZSkge1xuICAgICAgICAgICAgICAgICAgICAkb2xkUGFnZS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRjdXJyZW50UGFnZSA9ICRuZXdQYWdlO1xuXG4gICAgICAgICAgICAgICAgLy8gV2UgY2FsbCB0aGUgdHJhbnNpdGlvbiBlbmQgY2FsbGJhY2sgYW55d2F5XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5hZnRlclRyYW5zaXRpb24oaXNGaXJzdFBhZ2VTbGlkZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBQb3NpdGlvbiB0aGUgcGFnZSBhdCB0aGUgc3RhcnRpbmcgcG9zaXRpb24gb2YgdGhlIGFuaW1hdGlvblxuICAgICAgICAgICAgdGhpcy5fc2V0UGFnZVBvc2l0aW9uKCRuZXdQYWdlLCBvcmlnaW4pO1xuXG4gICAgICAgICAgICAvLyBTaGltIHRyYW5zaXRpb25lbmQgaWYgaXQncyBub3QgZmlyZWRcbiAgICAgICAgICAgIHZhciBzaGltVHJhbnNpdGlvbkVuZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgb25UcmFuc2l0aW9uRW5kKCk7XG4gICAgICAgICAgICB9LCB0aGlzLnRyYW5zaXRpb25EdXJhdGlvbk1zICsgMTAwKTtcblxuICAgICAgICAgICAgdGhpcy4kY3VycmVudFBhZ2Uub25lKCd0cmFuc2l0aW9uZW5kIHdlYmtpdFRyYW5zaXRpb25FbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgb25UcmFuc2l0aW9uRW5kKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gUG9zaXRpb24gdGhlIG5ldyBwYWdlIGFuZCB0aGUgY3VycmVudCBwYWdlIGF0IHRoZSBlbmRpbmcgcG9zaXRpb24gb2YgdGhlaXIgYW5pbWF0aW9uXG4gICAgICAgICAgICAvLyBBbmQgZW5hYmxlIHRoZWlyIGFuaW1hdGlvbiB2aWEgdHJhbnNpdGlvblxuXG4gICAgICAgICAgICB0aGlzLl9lbmFibGVUcmFuc2l0aW9uT25QYWdlcyhbJG5ld1BhZ2UsICRvbGRQYWdlXSk7XG5cbiAgICAgICAgICAgIC8vIEZvcmNlIHJlZmxvdy4gTW9yZSBpbmZvcm1hdGlvbiBoZXJlOlxuICAgICAgICAgICAgLy8gaHR0cDovL3d3dy5waHBpZWQuY29tL3JlbmRlcmluZy1yZXBhaW50LXJlZmxvd3JlbGF5b3V0LXJlc3R5bGUvXG4gICAgICAgICAgICAvKmpzaGludCAtVzAzMCovXG4gICAgICAgICAgICB0aGlzLiRjb250YWluZXJbMF0ub2Zmc2V0V2lkdGg7XG5cbiAgICAgICAgICAgIHRoaXMuX3NldFBhZ2VQb3NpdGlvbigkbmV3UGFnZSwgJ2NlbnRlcicpO1xuICAgICAgICAgICAgdGhpcy5fc2V0UGFnZVBvc2l0aW9uKCRvbGRQYWdlLCAgKG9yaWdpbiA9PT0gJ2xlZnQnID8gJ3JpZ2h0JyA6ICdsZWZ0JykpO1xuICAgICAgICAgICAgdGhpcy4kY3VycmVudFBhZ2UgPSAkbmV3UGFnZTtcblxuICAgICAgICAgICAgdmFyIG9uVHJhbnNpdGlvbkVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGF0Ll9kaXNhYmxlVHJhbnNpdGlvbk9uUGFnZXModGhhdC4kY3VycmVudFBhZ2UpO1xuXG4gICAgICAgICAgICAgICAgdGhhdC4kY29udGFpbmVyLmZpbmQoJz4gLnBhZ2U6bm90KDpsYXN0KScpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNoaW1UcmFuc2l0aW9uRW5kKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmFmdGVyVHJhbnNpdGlvbihmYWxzZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH0sXG4gICAgfTtcblxuICAgIHJldHVybiBQYWdlU2xpZGVyO1xuXG59KSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=