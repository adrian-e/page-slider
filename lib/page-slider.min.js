!function(t,i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof exports?module.exports=i(require("jquery")):t.PageSlider=i(t.jQuery)}(this,function(t){"use strict";var i=function(t){this.$container=t,t.css({height:"100%",width:"100%",overflow:"hidden"})};return i.prototype={constructor:i,$container:null,transitionsEnabled:!0,transitionDurationMs:300,stateHistory:[],$currentPage:null,_setPagePosition:function(t,i){var n="0px";switch(i){case"left":n="-100%";break;case"right":n="100%"}var e="translate3d("+n+", 0px , 0px)";t.css({webkitTransform:e,transform:e})},_jQueryArrayToCollection:function(i){if(i instanceof t)return i;var n=t();return i.forEach(function(t){n=n.add(t)}),n},_enableTransitionOnPages:function(t){t=this._jQueryArrayToCollection(t),t.css({webkitTransitionDuration:this.transitionDurationMs+"ms",transitionDuration:this.transitionDurationMs+"ms"})},_disableTransitionOnPages:function(t){t=this._jQueryArrayToCollection(t),t.css({webkitTransform:"none",transform:"none",webkitTransitionDuration:"0s",transitionDuration:"0s"})},setTransitionDurationMs:function(t){this.transitionDurationMs=t},disableTransitions:function(){this.transitionsEnabled=!1},enableTransitions:function(){this.transitionsEnabled=!0},getNextSlideOrigin:function(){var t=this.stateHistory.length;return 0===t?null:location.hash===this.stateHistory[t-2]?"left":"right"},slidePage:function(t,i){var n=location.hash,e=this.getNextSlideOrigin();switch(e){case"left":this.stateHistory.pop(),this.slidePageFrom(t,"left",i);break;case"right":this.stateHistory.push(n),this.slidePageFrom(t,"right",i);break;default:this.stateHistory.push(n),this.slidePageFrom(t,null,i)}},slidePageFrom:function(i,n,e){var s=this;e=e||{},e.beforeTransition=e.beforeTransition||t.noop,e.afterTransition=e.afterTransition||t.noop;var r=this.$currentPage,o=!r;if(i.addClass("page"),this.$container.append(i),e.beforeTransition(),o||!n||!this.transitionsEnabled)return this._disableTransitionOnPages(i),r&&r.remove(),this.$currentPage=i,void e.afterTransition(o);this._setPagePosition(i,n);var a=setTimeout(function(){u()},this.transitionDurationMs+100);this.$currentPage.one("transitionend webkitTransitionEnd",function(){u()}),this._enableTransitionOnPages([i,r]),this.$container[0].offsetWidth,setTimeout(function(){s._setPagePosition(i,"center"),s._setPagePosition(r,"left"===n?"right":"left"),s.$currentPage=i},0);var u=function(){s._disableTransitionOnPages(s.$currentPage),s.$container.find("> .page:not(:last)").remove(),clearTimeout(a),e.afterTransition(!1)}}},i});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhZ2Utc2xpZGVyLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJQYWdlU2xpZGVyIiwialF1ZXJ5IiwidGhpcyIsIiQiLCIkY29udGFpbmVyIiwiY3NzIiwiaGVpZ2h0Iiwid2lkdGgiLCJvdmVyZmxvdyIsInByb3RvdHlwZSIsImNvbnN0cnVjdG9yIiwidHJhbnNpdGlvbnNFbmFibGVkIiwidHJhbnNpdGlvbkR1cmF0aW9uTXMiLCJzdGF0ZUhpc3RvcnkiLCIkY3VycmVudFBhZ2UiLCJfc2V0UGFnZVBvc2l0aW9uIiwiJHBhZ2UiLCJuZXdMb2NhdGlvbiIsIm5ld1Bvc2l0aW9uIiwidHJhbnNmb3JtIiwid2Via2l0VHJhbnNmb3JtIiwiX2pRdWVyeUFycmF5VG9Db2xsZWN0aW9uIiwianF1ZXJ5QXJyYXkiLCIkY29sbGVjdGlvbiIsImZvckVhY2giLCIkZWwiLCJhZGQiLCJfZW5hYmxlVHJhbnNpdGlvbk9uUGFnZXMiLCIkcGFnZXMiLCJ3ZWJraXRUcmFuc2l0aW9uRHVyYXRpb24iLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJfZGlzYWJsZVRyYW5zaXRpb25PblBhZ2VzIiwic2V0VHJhbnNpdGlvbkR1cmF0aW9uTXMiLCJkdXJhdGlvbk1zIiwiZGlzYWJsZVRyYW5zaXRpb25zIiwiZW5hYmxlVHJhbnNpdGlvbnMiLCJnZXROZXh0U2xpZGVPcmlnaW4iLCJoaXN0b3J5TGVuZ3RoIiwibGVuZ3RoIiwibG9jYXRpb24iLCJoYXNoIiwic2xpZGVQYWdlIiwiJG5ld1BhZ2UiLCJvcHRpb25zIiwic3RhdGUiLCJzbGlkZUJlaGF2aW91ciIsInBvcCIsInNsaWRlUGFnZUZyb20iLCJwdXNoIiwib3JpZ2luIiwidGhhdCIsImJlZm9yZVRyYW5zaXRpb24iLCJub29wIiwiYWZ0ZXJUcmFuc2l0aW9uIiwiJG9sZFBhZ2UiLCJpc0ZpcnN0UGFnZVNsaWRlIiwiYWRkQ2xhc3MiLCJhcHBlbmQiLCJyZW1vdmUiLCJzaGltVHJhbnNpdGlvbkVuZCIsInNldFRpbWVvdXQiLCJvblRyYW5zaXRpb25FbmQiLCJvbmUiLCJvZmZzZXRXaWR0aCIsImZpbmQiLCJjbGVhclRpbWVvdXQiXSwibWFwcGluZ3MiOiJDQU9FLFNBQVVBLEVBQU1DLEdBQ1Msa0JBQVhDLFNBQXlCQSxPQUFPQyxJQUV2Q0QsUUFBUSxVQUFXRCxHQUNPLGdCQUFaRyxTQUVkQyxPQUFPRCxRQUFVSCxFQUFRSyxRQUFRLFdBR2pDTixFQUFLTyxXQUFhTixFQUFRRCxFQUFLUSxTQUVyQ0MsS0FBTSxTQUFVQyxHQUNmLFlBRUEsSUFBSUgsR0FBYSxTQUFVSSxHQUV2QkYsS0FBS0UsV0FBYUEsRUFHbEJBLEVBQVdDLEtBQ1BDLE9BQVEsT0FDUkMsTUFBTyxPQUNQQyxTQUFVLFdBNE9sQixPQXhPQVIsR0FBV1MsV0FFUEMsWUFBYVYsRUFFYkksV0FBWSxLQUNaTyxvQkFBb0IsRUFDcEJDLHFCQUFzQixJQUN0QkMsZ0JBQ0FDLGFBQWMsS0FPZEMsaUJBQWtCLFNBQVVDLEVBQU9DLEdBRS9CLEdBQUlDLEdBQWMsS0FFbEIsUUFBUUQsR0FDSixJQUFLLE9BQ0RDLEVBQWMsT0FDZCxNQUNKLEtBQUssUUFDREEsRUFBYyxPQUl0QixHQUFJQyxHQUFZLGVBQWlCRCxFQUFjLGNBRS9DRixHQUFNWCxLQUNGZSxnQkFBbUJELEVBQ25CQSxVQUFhQSxLQUlyQkUseUJBQTBCLFNBQVVDLEdBRWhDLEdBQUlBLFlBQXVCbkIsR0FDdkIsTUFBT21CLEVBR1gsSUFBSUMsR0FBY3BCLEdBTWxCLE9BSkFtQixHQUFZRSxRQUFRLFNBQVVDLEdBQzFCRixFQUFjQSxFQUFZRyxJQUFJRCxLQUczQkYsR0FNWEkseUJBQTBCLFNBQVVDLEdBRWhDQSxFQUFTMUIsS0FBS21CLHlCQUF5Qk8sR0FFdkNBLEVBQU92QixLQUNId0IseUJBQTRCM0IsS0FBS1UscUJBQXVCLEtBQ3hEa0IsbUJBQXNCNUIsS0FBS1UscUJBQXVCLFFBTzFEbUIsMEJBQTJCLFNBQVVILEdBRWpDQSxFQUFTMUIsS0FBS21CLHlCQUF5Qk8sR0FFdkNBLEVBQU92QixLQUNIZSxnQkFBbUIsT0FDbkJELFVBQWEsT0FDYlUseUJBQTRCLEtBQzVCQyxtQkFBc0IsUUFPOUJFLHdCQUF5QixTQUFVQyxHQUMvQi9CLEtBQUtVLHFCQUF1QnFCLEdBTWhDQyxtQkFBb0IsV0FDaEJoQyxLQUFLUyxvQkFBcUIsR0FNOUJ3QixrQkFBbUIsV0FDZmpDLEtBQUtTLG9CQUFxQixHQU05QnlCLG1CQUFvQixXQUNoQixHQUFJQyxHQUFnQm5DLEtBQUtXLGFBQWF5QixNQUV0QyxPQUFzQixLQUFsQkQsRUFDTyxLQUVGRSxTQUFTQyxPQUFTdEMsS0FBS1csYUFBYXdCLEVBQWdCLEdBQ2xELE9BR0EsU0FTZkksVUFBVyxTQUFVQyxFQUFVQyxHQUUzQixHQUFJQyxHQUFRTCxTQUFTQyxLQUVqQkssRUFBaUIzQyxLQUFLa0Msb0JBRTFCLFFBQVFTLEdBQ0osSUFBSyxPQUNEM0MsS0FBS1csYUFBYWlDLE1BQ2xCNUMsS0FBSzZDLGNBQWNMLEVBQVUsT0FBUUMsRUFDckMsTUFDSixLQUFLLFFBQ0R6QyxLQUFLVyxhQUFhbUMsS0FBS0osR0FDdkIxQyxLQUFLNkMsY0FBY0wsRUFBVSxRQUFTQyxFQUN0QyxNQUNKLFNBQ0l6QyxLQUFLVyxhQUFhbUMsS0FBS0osR0FDdkIxQyxLQUFLNkMsY0FBY0wsRUFBVSxLQUFNQyxLQWtCL0NJLGNBQWUsU0FBVUwsRUFBVU8sRUFBUU4sR0FFdkMsR0FBSU8sR0FBT2hELElBRVh5QyxHQUFVQSxNQUNWQSxFQUFRUSxpQkFBbUJSLEVBQVFRLGtCQUFvQmhELEVBQUVpRCxLQUN6RFQsRUFBUVUsZ0JBQWtCVixFQUFRVSxpQkFBbUJsRCxFQUFFaUQsSUFHdkQsSUFBSUUsR0FBV3BELEtBQUtZLGFBQ2hCeUMsR0FBb0JELENBUXhCLElBTkFaLEVBQVNjLFNBQVMsUUFDbEJ0RCxLQUFLRSxXQUFXcUQsT0FBT2YsR0FFdkJDLEVBQVFRLG1CQUdKSSxJQUFxQk4sSUFBVy9DLEtBQUtTLG1CQWNyQyxNQVhBVCxNQUFLNkIsMEJBQTBCVyxHQUczQlksR0FDQUEsRUFBU0ksU0FHYnhELEtBQUtZLGFBQWU0QixNQUdwQkMsR0FBUVUsZ0JBQWdCRSxFQUs1QnJELE1BQUthLGlCQUFpQjJCLEVBQVVPLEVBR2hDLElBQUlVLEdBQW9CQyxXQUFXLFdBQy9CQyxLQUNEM0QsS0FBS1UscUJBQXVCLElBRS9CVixNQUFLWSxhQUFhZ0QsSUFBSSxvQ0FBcUMsV0FDdkRELE1BTUozRCxLQUFLeUIsMEJBQTBCZSxFQUFVWSxJQUt6Q3BELEtBQUtFLFdBQVcsR0FBRzJELFlBRW5CSCxXQUFXLFdBQ1BWLEVBQUtuQyxpQkFBaUIyQixFQUFVLFVBQ2hDUSxFQUFLbkMsaUJBQWlCdUMsRUFBdUIsU0FBWEwsRUFBb0IsUUFBVSxRQUNoRUMsRUFBS3BDLGFBQWU0QixHQUNyQixFQUVILElBQUltQixHQUFrQixXQUNsQlgsRUFBS25CLDBCQUEwQm1CLEVBQUtwQyxjQUVwQ29DLEVBQUs5QyxXQUFXNEQsS0FBSyxzQkFBc0JOLFNBRTNDTyxhQUFhTixHQUNiaEIsRUFBUVUsaUJBQWdCLE1BTTdCckQiLCJmaWxlIjoicGFnZS1zbGlkZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEhlbHBlciB0byBzbGlkZSBhIG5ldyBwYWdlIGluIHRoZSBhcHAuXG4gKiBUaGlzIGhlbHBlciBvbmx5IHdvcmtzIHdlbGwgaWYgdGhlIGNvbnRhaW5lciBpcyBhdCAxMDAlIGhlaWdodC93aWR0aCBhbmQgb3ZlcmZsb3cgaGlkZGVuLlxuICpcbiAqIEJhc2VkIG9uIDogaHR0cHM6Ly9naXRodWIuY29tL2Njb2VucmFldHMvZGlyZWN0b3J5LWJhY2tib25lLXRvcGNvYXQtcmVxdWlyZVxuICpcbiAqL1xuIChmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgICAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG4gICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAvLyBOb2RlLlxuICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTtcbiAgICAgfSBlbHNlIHtcbiAgICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgICAgICByb290LlBhZ2VTbGlkZXIgPSBmYWN0b3J5KHJvb3QualF1ZXJ5KTtcbiAgICAgfVxuIH0odGhpcywgZnVuY3Rpb24gKCQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgUGFnZVNsaWRlciA9IGZ1bmN0aW9uICgkY29udGFpbmVyKSB7XG5cbiAgICAgICAgdGhpcy4kY29udGFpbmVyID0gJGNvbnRhaW5lcjtcblxuICAgICAgICAvLyBUaGUgY29udGFpbmVyIG5lZWQgc3BlY2lmaWMgc3R5bGVcbiAgICAgICAgJGNvbnRhaW5lci5jc3Moe1xuICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgUGFnZVNsaWRlci5wcm90b3R5cGUgPSB7XG5cbiAgICAgICAgY29uc3RydWN0b3I6IFBhZ2VTbGlkZXIsXG5cbiAgICAgICAgJGNvbnRhaW5lcjogbnVsbCxcbiAgICAgICAgdHJhbnNpdGlvbnNFbmFibGVkOiB0cnVlLFxuICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb25NczogMzAwLFxuICAgICAgICBzdGF0ZUhpc3Rvcnk6IFtdLFxuICAgICAgICAkY3VycmVudFBhZ2U6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBhIHBhZ2UgcG9zaXRpb24gdmlhIHRyYW5zbGF0ZTNkXG4gICAgICAgICAqIEBwYXJhbSB7anF1ZXJ5fSAkcGFnZSBQYWdlIHRoYXQgd2Ugd2FudCB0byBQb3NpdGlvblxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmV3TG9jYXRpb24gTmV3IHBvc2l0aW9uICgnbGVmdCcsICdyaWdodCcgb3IgbnVsbCAoZGVmYXVsdCkpXG4gICAgICAgICAqL1xuICAgICAgICBfc2V0UGFnZVBvc2l0aW9uOiBmdW5jdGlvbiAoJHBhZ2UsIG5ld0xvY2F0aW9uKSB7XG5cbiAgICAgICAgICAgIHZhciBuZXdQb3NpdGlvbiA9ICcwcHgnO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKG5ld0xvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgICAgICAgICAgICAgIG5ld1Bvc2l0aW9uID0gJy0xMDAlJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICBuZXdQb3NpdGlvbiA9ICcxMDAlJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB0cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoJyArIG5ld1Bvc2l0aW9uICsgJywgMHB4ICwgMHB4KSc7XG5cbiAgICAgICAgICAgICRwYWdlLmNzcyh7XG4gICAgICAgICAgICAgICAgJ3dlYmtpdFRyYW5zZm9ybSc6IHRyYW5zZm9ybSxcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogdHJhbnNmb3JtLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgX2pRdWVyeUFycmF5VG9Db2xsZWN0aW9uOiBmdW5jdGlvbiAoanF1ZXJ5QXJyYXkpIHtcblxuICAgICAgICAgICAgaWYgKGpxdWVyeUFycmF5IGluc3RhbmNlb2YgJCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBqcXVlcnlBcnJheTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyICRjb2xsZWN0aW9uID0gJCgpO1xuXG4gICAgICAgICAgICBqcXVlcnlBcnJheS5mb3JFYWNoKGZ1bmN0aW9uICgkZWwpIHtcbiAgICAgICAgICAgICAgICAkY29sbGVjdGlvbiA9ICRjb2xsZWN0aW9uLmFkZCgkZWwpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiAkY29sbGVjdGlvbjtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5hYmxlIGNzcyB0cmFuc2l0aW9uIG9uIHRoZSBnaXZlbiBwYWdlLlxuICAgICAgICAgKi9cbiAgICAgICAgX2VuYWJsZVRyYW5zaXRpb25PblBhZ2VzOiBmdW5jdGlvbiAoJHBhZ2VzKSB7XG5cbiAgICAgICAgICAgICRwYWdlcyA9IHRoaXMuX2pRdWVyeUFycmF5VG9Db2xsZWN0aW9uKCRwYWdlcyk7XG5cbiAgICAgICAgICAgICRwYWdlcy5jc3Moe1xuICAgICAgICAgICAgICAgICd3ZWJraXRUcmFuc2l0aW9uRHVyYXRpb24nOiB0aGlzLnRyYW5zaXRpb25EdXJhdGlvbk1zICsgJ21zJyxcbiAgICAgICAgICAgICAgICAndHJhbnNpdGlvbkR1cmF0aW9uJzogdGhpcy50cmFuc2l0aW9uRHVyYXRpb25NcyArICdtcycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsZSBjc3MgdHJhbnNpdGlvbiBvbiB0aGUgZ2l2ZW4gcGFnZS5cbiAgICAgICAgICovXG4gICAgICAgIF9kaXNhYmxlVHJhbnNpdGlvbk9uUGFnZXM6IGZ1bmN0aW9uICgkcGFnZXMpIHtcblxuICAgICAgICAgICAgJHBhZ2VzID0gdGhpcy5falF1ZXJ5QXJyYXlUb0NvbGxlY3Rpb24oJHBhZ2VzKTtcblxuICAgICAgICAgICAgJHBhZ2VzLmNzcyh7XG4gICAgICAgICAgICAgICAgJ3dlYmtpdFRyYW5zZm9ybSc6ICdub25lJyxcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ25vbmUnLFxuICAgICAgICAgICAgICAgICd3ZWJraXRUcmFuc2l0aW9uRHVyYXRpb24nOiAnMHMnLFxuICAgICAgICAgICAgICAgICd0cmFuc2l0aW9uRHVyYXRpb24nOiAnMHMnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0cmFuc2l0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgKi9cbiAgICAgICAgc2V0VHJhbnNpdGlvbkR1cmF0aW9uTXM6IGZ1bmN0aW9uIChkdXJhdGlvbk1zKSB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25EdXJhdGlvbk1zID0gZHVyYXRpb25NcztcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsZSBjc3MgdHJhbnNpdGlvbiBvbiBwYWdlXG4gICAgICAgICAqL1xuICAgICAgICBkaXNhYmxlVHJhbnNpdGlvbnM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbnNFbmFibGVkID0gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuYWJsZSBjc3MgdHJhbnNpdGlvbiBvbiBwYWdlXG4gICAgICAgICAqL1xuICAgICAgICBlbmFibGVUcmFuc2l0aW9uczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uc0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm4gdGhlIHR5cGUgb2Ygc2xpZGUgKG51bGwsICdsZWZ0JyBvciAncmlnaHQnKVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0TmV4dFNsaWRlT3JpZ2luOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGlzdG9yeUxlbmd0aCA9IHRoaXMuc3RhdGVIaXN0b3J5Lmxlbmd0aDtcblxuICAgICAgICAgICAgaWYgKGhpc3RvcnlMZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGxvY2F0aW9uLmhhc2ggPT09IHRoaXMuc3RhdGVIaXN0b3J5W2hpc3RvcnlMZW5ndGggLSAyXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnbGVmdCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3JpZ2h0JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVXNlIHRoaXMgZnVuY3Rpb24gaWYgeW91IHdhbnQgUGFnZVNsaWRlciB0byBhdXRvbWF0aWNhbGx5IGRldGVybWluZVxuICAgICAgICAgKiB0aGUgc2xpZGluZyBkaXJlY3Rpb24gYmFzZWQgb24gdGhlIHN0YXRlIGhpc3RvcnkuXG4gICAgICAgICAqIGFmdGVyVHJhbnNpdGlvbiBmdW5jdGlvbiBpcyBjYWxsZWQgd2hlbiB0aGUgdHJhbnNpdGlvbiBlbmRzXG4gICAgICAgICAqL1xuICAgICAgICBzbGlkZVBhZ2U6IGZ1bmN0aW9uICgkbmV3UGFnZSwgb3B0aW9ucykge1xuXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBsb2NhdGlvbi5oYXNoO1xuXG4gICAgICAgICAgICB2YXIgc2xpZGVCZWhhdmlvdXIgPSB0aGlzLmdldE5leHRTbGlkZU9yaWdpbigpO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKHNsaWRlQmVoYXZpb3VyKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVIaXN0b3J5LnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlUGFnZUZyb20oJG5ld1BhZ2UsICdsZWZ0Jywgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZUhpc3RvcnkucHVzaChzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVQYWdlRnJvbSgkbmV3UGFnZSwgJ3JpZ2h0Jywgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVIaXN0b3J5LnB1c2goc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlUGFnZUZyb20oJG5ld1BhZ2UsIG51bGwsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVXNlIHRoaXMgZnVuY3Rpb24gZGlyZWN0bHkgaWYgeW91IHdhbnQgdG8gY29udHJvbCB0aGUgc2xpZGluZyBkaXJlY3Rpb24gb3V0c2lkZSBQYWdlU2xpZGVyXG4gICAgICAgICAqIEBwYXJhbSAgeyR9ICRuZXdQYWdlIFRoZSBuZXcgcGFnZSB0byBzbGlkZSBpblxuICAgICAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG9yaWdpbiBPcmlnaW4gb2YgdGhlIHNsaWRlICgnbGVmdCcsICdyaWdodCcsIG9yIG51bGwpXG4gICAgICAgICAqIEBwYXJhbSAge2Z1bmN0aW9ufSBvcHRpb25zXG4gICAgICAgICAqICBiZWZvcmVUcmFuc2l0aW9uOiBDYWxsZWQgYmVmb3JlIHRoZSB0cmFuc2l0aW9uLCBhZnRlciB0aGUgcGFnZSBpcyBhZGRlZFxuICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgdG8gdGhlIERPTS5cbiAgICAgICAgICogICBhZnRlclRyYW5zaXRpb246IENhbGxlZCB3aGVuIHRoZSBzbGlkZSBlbmRcbiAgICAgICAgICogICAgICAgICAgICAgICAgICAgIG9yIGltbWVkaWF0ZWx5IGlmIHRoZXJlIGlzIG5vIHRyYW5zaXRpb24uXG4gICAgICAgICAqICAgICAgICAgICAgICAgICAgICBBIGJvb2xlYW4gaXMgcGFzc2VkIHRvIHRoZSBjYWxsYmFjayA6IHRydWUgaWYgd2UganVzdCBzbGlkZVxuICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgaW4gdGhlIHZlcnkgZmlyc3QgcGFnZS5cbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIHNsaWRlUGFnZUZyb206IGZ1bmN0aW9uICgkbmV3UGFnZSwgb3JpZ2luLCBvcHRpb25zKSB7XG5cbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgICAgICBvcHRpb25zLmJlZm9yZVRyYW5zaXRpb24gPSBvcHRpb25zLmJlZm9yZVRyYW5zaXRpb24gfHwgJC5ub29wO1xuICAgICAgICAgICAgb3B0aW9ucy5hZnRlclRyYW5zaXRpb24gPSBvcHRpb25zLmFmdGVyVHJhbnNpdGlvbiB8fCAkLm5vb3A7XG5cbiAgICAgICAgICAgIC8vIEN1cnJlbnQgcGFnZSBtdXN0IGJlIHJlbW92ZWQgYWZ0ZXIgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgIHZhciAkb2xkUGFnZSA9IHRoaXMuJGN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgdmFyIGlzRmlyc3RQYWdlU2xpZGUgPSAhJG9sZFBhZ2U7XG5cbiAgICAgICAgICAgICRuZXdQYWdlLmFkZENsYXNzKCdwYWdlJyk7XG4gICAgICAgICAgICB0aGlzLiRjb250YWluZXIuYXBwZW5kKCRuZXdQYWdlKTtcblxuICAgICAgICAgICAgb3B0aW9ucy5iZWZvcmVUcmFuc2l0aW9uKCk7XG5cbiAgICAgICAgICAgIC8vIEZpcnN0IGxvYWRlZCBwYWdlIChubyBvbGQgcGFnZSkgb3Igbm8gdHJhbnNpdGlvblxuICAgICAgICAgICAgaWYgKGlzRmlyc3RQYWdlU2xpZGUgfHwgIW9yaWdpbiB8fCAhdGhpcy50cmFuc2l0aW9uc0VuYWJsZWQpIHtcblxuICAgICAgICAgICAgICAgIC8vIERpc2FibGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVUcmFuc2l0aW9uT25QYWdlcygkbmV3UGFnZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgb2xkIHBhZ2UgaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICAgICAgaWYgKCRvbGRQYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICRvbGRQYWdlLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuJGN1cnJlbnRQYWdlID0gJG5ld1BhZ2U7XG5cbiAgICAgICAgICAgICAgICAvLyBXZSBjYWxsIHRoZSB0cmFuc2l0aW9uIGVuZCBjYWxsYmFjayBhbnl3YXlcbiAgICAgICAgICAgICAgICBvcHRpb25zLmFmdGVyVHJhbnNpdGlvbihpc0ZpcnN0UGFnZVNsaWRlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFBvc2l0aW9uIHRoZSBwYWdlIGF0IHRoZSBzdGFydGluZyBwb3NpdGlvbiBvZiB0aGUgYW5pbWF0aW9uXG4gICAgICAgICAgICB0aGlzLl9zZXRQYWdlUG9zaXRpb24oJG5ld1BhZ2UsIG9yaWdpbik7XG5cbiAgICAgICAgICAgIC8vIFNoaW0gdHJhbnNpdGlvbmVuZCBpZiBpdCdzIG5vdCBmaXJlZFxuICAgICAgICAgICAgdmFyIHNoaW1UcmFuc2l0aW9uRW5kID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBvblRyYW5zaXRpb25FbmQoKTtcbiAgICAgICAgICAgIH0sIHRoaXMudHJhbnNpdGlvbkR1cmF0aW9uTXMgKyAxMDApO1xuXG4gICAgICAgICAgICB0aGlzLiRjdXJyZW50UGFnZS5vbmUoJ3RyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBvblRyYW5zaXRpb25FbmQoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBQb3NpdGlvbiB0aGUgbmV3IHBhZ2UgYW5kIHRoZSBjdXJyZW50IHBhZ2UgYXQgdGhlIGVuZGluZyBwb3NpdGlvbiBvZiB0aGVpciBhbmltYXRpb25cbiAgICAgICAgICAgIC8vIEFuZCBlbmFibGUgdGhlaXIgYW5pbWF0aW9uIHZpYSB0cmFuc2l0aW9uXG5cbiAgICAgICAgICAgIHRoaXMuX2VuYWJsZVRyYW5zaXRpb25PblBhZ2VzKFskbmV3UGFnZSwgJG9sZFBhZ2VdKTtcblxuICAgICAgICAgICAgLy8gRm9yY2UgcmVmbG93LiBNb3JlIGluZm9ybWF0aW9uIGhlcmU6XG4gICAgICAgICAgICAvLyBodHRwOi8vd3d3LnBocGllZC5jb20vcmVuZGVyaW5nLXJlcGFpbnQtcmVmbG93cmVsYXlvdXQtcmVzdHlsZS9cbiAgICAgICAgICAgIC8qanNoaW50IC1XMDMwKi9cbiAgICAgICAgICAgIHRoaXMuJGNvbnRhaW5lclswXS5vZmZzZXRXaWR0aDtcblxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5fc2V0UGFnZVBvc2l0aW9uKCRuZXdQYWdlLCAnY2VudGVyJyk7XG4gICAgICAgICAgICAgICAgdGhhdC5fc2V0UGFnZVBvc2l0aW9uKCRvbGRQYWdlLCAgKG9yaWdpbiA9PT0gJ2xlZnQnID8gJ3JpZ2h0JyA6ICdsZWZ0JykpO1xuICAgICAgICAgICAgICAgIHRoYXQuJGN1cnJlbnRQYWdlID0gJG5ld1BhZ2U7XG4gICAgICAgICAgICB9LCAwKTtcblxuICAgICAgICAgICAgdmFyIG9uVHJhbnNpdGlvbkVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGF0Ll9kaXNhYmxlVHJhbnNpdGlvbk9uUGFnZXModGhhdC4kY3VycmVudFBhZ2UpO1xuXG4gICAgICAgICAgICAgICAgdGhhdC4kY29udGFpbmVyLmZpbmQoJz4gLnBhZ2U6bm90KDpsYXN0KScpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNoaW1UcmFuc2l0aW9uRW5kKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmFmdGVyVHJhbnNpdGlvbihmYWxzZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH0sXG4gICAgfTtcblxuICAgIHJldHVybiBQYWdlU2xpZGVyO1xuXG59KSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=